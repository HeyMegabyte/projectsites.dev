<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
  <title>Project Sites - Your Website, Handled. Finally.</title>
  <meta name="description" content="AI-powered websites for small businesses. Search for your business and get a professional site in minutes.">
  <meta name="keywords" content="AI website builder, small business websites, professional site generator, automated web design, business website, project sites, megabyte labs">
  <meta name="author" content="Brian Zalewski">
  <meta name="copyright" content="Megabyte LLC">
  <meta name="robots" content="index, follow">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="format-detection" content="telephone=no">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="400">
  <meta name="contact" content="help@megabyte.space">
  <meta name="geography" content="USA">
  <meta itemprop="image" content="https://sites.megabyte.space/icon-512.png">

  <!-- Favicons & App Icons -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/logo-icon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icon-16.png">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/icon-180.png">
  <link rel="mask-icon" href="/logo-icon.svg" color="#50a5db">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Mobile Web App -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Project Sites">
  <meta name="application-name" content="Project Sites">

  <!-- Microsoft -->
  <meta name="msapplication-TileColor" content="#0a0a1a">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="msapplication-starturl" content="https://sites.megabyte.space">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="msapplication-tooltip" content="Project Sites: AI-powered websites for small businesses">
  <meta name="msapplication-task" content="name=Home;action-uri=https://sites.megabyte.space;icon-uri=https://sites.megabyte.space/favicon.ico">
  <meta name="msapplication-task" content="name=Privacy Policy;action-uri=https://sites.megabyte.space/privacy;icon-uri=https://sites.megabyte.space/favicon.ico">
  <meta name="msapplication-task" content="name=Terms of Service;action-uri=https://sites.megabyte.space/terms;icon-uri=https://sites.megabyte.space/favicon.ico">
  <meta name="theme-color" content="#0a0a1a">

  <!-- Open Graph -->
  <meta property="og:site_name" content="Project Sites">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Project Sites - Your Website, Handled. Finally.">
  <meta property="og:description" content="AI-powered websites for small businesses. Search for your business and get a professional site in minutes.">
  <meta property="og:image" content="https://sites.megabyte.space/icon-512.png">
  <meta property="og:url" content="https://sites.megabyte.space/">
  <meta property="al:web:url" content="https://sites.megabyte.space/">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@MegabyteLabs">
  <meta name="twitter:creator" content="@MegabyteLabs">
  <meta name="twitter:title" content="Project Sites - Your Website, Handled. Finally.">
  <meta name="twitter:description" content="AI-powered websites for small businesses. Search for your business and get a professional site in minutes.">
  <meta name="twitter:image" content="https://sites.megabyte.space/icon-512.png">

  <!-- Canonical -->
  <link rel="canonical" href="https://sites.megabyte.space/">

  <!-- JSON-LD: WebSite -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@id": "https://sites.megabyte.space/#schema-website",
    "@type": "WebSite",
    "encoding": "UTF-8",
    "image": {
      "@type": "ImageObject",
      "@id": "https://sites.megabyte.space/#schema-site-logo",
      "url": "https://sites.megabyte.space/icon-512.png",
      "height": 512,
      "width": 512
    },
    "name": "Project Sites",
    "publisher": "Megabyte Labs",
    "url": "https://sites.megabyte.space",
    "potentialActions": {
      "@type": "SearchAction",
      "target": "https://sites.megabyte.space/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <!-- JSON-LD: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": ["SoftwareApplication", "WebApplication"],
    "browserRequirements": ["HTML5", "CSS3", "JavaScript", "Modern Browser"],
    "name": "Project Sites",
    "applicationSuite": "Megabyte Labs",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "AI-powered website generation for small businesses",
      "Search for your business and get a professional site in minutes",
      "Custom domain support with automatic SSL",
      "Built-in SEO optimization and performance tuning",
      "Stripe-powered billing and subscription management",
      "Google Places integration for business discovery"
    ],
    "softwareVersion": "1.0.0",
    "thumbnailUrl": "https://sites.megabyte.space/icon-180.png",
    "copyrightYear": 2026,
    "copyrightHolder": "Megabyte LLC",
    "creator": "Brian Zalewski"
  }
  </script>

  <!-- JSON-LD: Organization -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "name": "Megabyte Labs",
    "legalName": "Megabyte LLC",
    "email": "help@megabyte.space",
    "url": "https://megabyte.space",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sites.megabyte.space/icon-180.png"
    },
    "image": "https://sites.megabyte.space/icon-512.png",
    "founder": "Brian Zalewski",
    "foundingDate": "2022-10-29",
    "telephone": "+1-424-373-7371",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "US",
      "addressLocality": "Morristown",
      "addressRegion": "New Jersey",
      "postalCode": "07960",
      "streetAddress": "63 James Street"
    },
    "sameAs": [
      "https://github.com/HeyMegabyte",
      "https://gitlab.com/megabyte-labs",
      "https://linkedin.com/company/megabyte-labs",
      "https://www.youtube.com/@HeyMegabyte",
      "https://x.com/HeyMegabyte",
      "https://www.instagram.com/heymegabyteofficial/",
      "https://www.facebook.com/HeyMegabyte"
    ]
  }
  </script>

  <!-- JSON-LD: Legal Pages -->
  <script type="application/ld+json">
  [
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "url": "https://sites.megabyte.space/privacy",
      "headline": "Privacy Policy",
      "image": { "@list": [{ "@type": "ImageObject", "url": "https://sites.megabyte.space/icon-512.png" }] }
    },
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "url": "https://sites.megabyte.space/terms",
      "headline": "Terms of Service",
      "image": { "@list": [{ "@type": "ImageObject", "url": "https://sites.megabyte.space/icon-512.png" }] }
    },
    {
      "@context": "http://schema.org",
      "@type": "Article",
      "url": "https://sites.megabyte.space/content",
      "headline": "Content Policy",
      "image": { "@list": [{ "@type": "ImageObject", "url": "https://sites.megabyte.space/icon-512.png" }] }
    }
  ]
  </script>

  <!-- Preconnect to key CDNs -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://us.i.posthog.com">

  <!-- Stylesheets -->
  <link href="https://releases.transloadit.com/uppy/v4.12.1/uppy.min.css" rel="stylesheet">
  <style>
    /* ======================================================
       CSS Custom Properties
       ====================================================== */
    :root {
      --bg-primary: #0a0a1a;
      --bg-secondary: #111128;
      --bg-card: #161635;
      --bg-card-hover: #1c1c45;
      --bg-input: #0f0f2a;
      --accent: #50a5db;
      --accent-dim: rgba(80, 165, 219, 0.12);
      --accent-glow: rgba(80, 165, 219, 0.25);
      --secondary: #7c3aed;
      --secondary-dim: rgba(124, 58, 237, 0.15);
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --border: rgba(80, 165, 219, 0.1);
      --border-hover: rgba(80, 165, 219, 0.3);
      --error: #ef4444;
      --error-dim: rgba(239, 68, 68, 0.12);
      --success: #22c55e;
      --radius: 12px;
      --radius-lg: 16px;
      --shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.5);
      --shadow-accent: 0 0 30px rgba(80, 165, 219, 0.15);
      --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; height: 100%; }

    body {
      font-family: var(--font);
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    /* ======================================================
       Scrollbar
       ====================================================== */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-primary); }
    ::-webkit-scrollbar-thumb { background: var(--bg-card); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent-dim); }

    /* ======================================================
       Animations
       ====================================================== */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    @keyframes orbFloat1 {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(60px, -40px) scale(1.1); }
      66% { transform: translate(-30px, 30px) scale(0.95); }
    }
    @keyframes orbFloat2 {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(-50px, 50px) scale(0.9); }
      66% { transform: translate(40px, -20px) scale(1.05); }
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes dotPulse {
      0%, 80%, 100% { transform: scale(0); opacity: 0; }
      40% { transform: scale(1); opacity: 1; }
    }

    /* ======================================================
       Header / Nav
       ====================================================== */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: 0 24px;
      height: 60px;
      display: flex;
      align-items: center;
      background: rgba(10, 10, 26, 0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }
    .header-inner {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      cursor: pointer;
    }
    .logo img { flex-shrink: 0; }

    /* ======================================================
       Screens Container
       ====================================================== */
    .app {
      min-height: 100vh;
      padding-top: 60px;
      position: relative;
    }
    .screen {
      display: none;
      min-height: calc(100vh - 60px);
      animation: fadeIn 0.3s ease;
    }
    .screen-search {
      min-height: auto;
    }
    .screen.active {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .screen-search.active {
      justify-content: flex-start;
      padding-top: 12vh;
    }

    /* ======================================================
       Background Orbs (shared)
       ====================================================== */
    .bg-orbs {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .bg-orbs .orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(100px);
      opacity: 0.18;
    }
    .bg-orbs .orb-1 {
      width: 500px; height: 500px;
      background: radial-gradient(circle, var(--secondary), transparent 70%);
      top: -120px; right: -120px;
      animation: orbFloat1 20s ease-in-out infinite;
    }
    .bg-orbs .orb-2 {
      width: 400px; height: 400px;
      background: radial-gradient(circle, var(--accent), transparent 70%);
      bottom: -80px; left: -100px;
      animation: orbFloat2 18s ease-in-out infinite;
    }
    .bg-orbs .orb-3 {
      width: 300px; height: 300px;
      background: radial-gradient(circle, #f472b6, transparent 70%);
      top: 40%; left: 50%;
      animation: orbFloat1 22s ease-in-out infinite reverse;
    }

    /* ======================================================
       Screen 1: Search / Hero
       ====================================================== */
    .screen-search {
      padding: 0 24px;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    .hero-brand {
      margin-bottom: 16px;
      animation: fadeInUp 0.6s ease;
    }
    .hero-brand h1 {
      font-size: clamp(2.2rem, 5.5vw, 3.8rem);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: 12px;
    }
    .hero-brand h1 .gradient-text {
      background: linear-gradient(135deg, var(--accent), var(--secondary), #f472b6);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 5s linear infinite;
    }
    .hero-brand .tagline {
      font-size: clamp(1rem, 2vw, 1.25rem);
      color: var(--text-secondary);
      font-weight: 400;
    }

    /* Search box */
    .search-wrapper {
      position: relative;
      z-index: 10;
      width: 100%;
      max-width: 640px;
      margin: 32px auto 0;
      animation: fadeInUp 0.6s ease 0.15s both;
    }
    .search-input-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }
    .search-icon {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      pointer-events: none;
      display: flex;
    }
    .search-input {
      width: 100%;
      padding: 18px 20px 18px 52px;
      font-size: 1.1rem;
      font-family: var(--font);
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      color: var(--text-primary);
      outline: none;
      transition: border-color var(--transition), box-shadow var(--transition);
      position: relative;
      z-index: 2;
    }
    .search-input::placeholder {
      color: var(--text-muted);
    }
    .search-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--accent-dim), 0 0 40px var(--accent-glow);
    }
    .search-spinner {
      position: absolute;
      right: 18px;
      top: 0;
      bottom: 0;
      margin-top: auto;
      margin-bottom: auto;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.15s;
      z-index: 3;
    }
    .search-spinner.visible { opacity: 1; visibility: visible; }

    /* Dropdown */
    .search-dropdown {
      position: absolute;
      top: 100%;
      margin-top: -14px;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border: 1px solid var(--border-hover);
      border-top: none;
      border-radius: 0 0 var(--radius) var(--radius);
      max-height: 400px;
      overflow-y: auto;
      z-index: 1;
      display: none;
      box-shadow: var(--shadow-lg);
    }
    .search-dropdown.open {
      display: block;
      animation: fadeInScale 0.2s ease;
    }
    .search-result {
      padding: 14px 20px;
      cursor: pointer;
      transition: background var(--transition);
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      text-align: left;
      display: flex;
      align-items: flex-start;
      gap: 14px;
    }
    .search-result:first-child { padding-top: 28px; }
    .search-result:last-child { border-bottom: none; }
    .search-result:hover {
      background: var(--bg-card-hover);
    }
    .search-result-icon {
      flex-shrink: 0;
      width: 38px;
      height: 38px;
      border-radius: 10px;
      background: var(--accent-dim);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2px;
    }
    .search-result-icon svg {
      width: 18px;
      height: 18px;
      color: var(--accent);
    }
    .search-result-text { flex: 1; min-width: 0; }
    .search-result-name {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .search-result-address {
      font-size: 0.82rem;
      color: var(--text-muted);
      font-style: italic;
      margin-top: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Custom website option */
    .search-result-custom {
      background: var(--secondary-dim);
      border-top: 1px solid rgba(124, 58, 237, 0.2);
    }
    .search-result-custom:hover {
      background: rgba(124, 58, 237, 0.22);
    }
    .search-result-custom .search-result-icon {
      background: var(--secondary-dim);
    }
    .search-result-custom .search-result-icon svg {
      color: var(--secondary);
    }
    .search-result-custom .search-result-name {
      color: #c4b5fd;
    }
    .search-result-custom .search-result-address {
      color: #a78bfa;
      font-style: normal;
    }

    .search-hint {
      margin-top: 20px;
      font-size: 0.85rem;
      color: var(--text-muted);
      animation: fadeInUp 0.6s ease 0.3s both;
    }

    /* ======================================================
       Screen 3: Sign-In Gate
       ====================================================== */
    .screen-signin {
      padding: 0 24px;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    .signin-card {
      width: 100%;
      max-width: 440px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 40px 32px;
      animation: fadeInScale 0.35s ease;
    }
    .signin-card h2 {
      font-size: 1.5rem;
      font-weight: 800;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }
    .signin-card .signin-subtitle {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 32px;
    }

    .signin-methods { display: flex; flex-direction: column; gap: 12px; }

    .signin-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 14px 20px;
      border-radius: var(--radius);
      font-size: 0.95rem;
      font-weight: 600;
      font-family: var(--font);
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition);
      border: 1px solid var(--border);
      background: var(--bg-input);
      color: var(--text-primary);
    }
    .signin-btn:hover {
      transform: translateY(-1px);
      border-color: var(--border-hover);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    .signin-btn svg { flex-shrink: 0; }

    .signin-btn-google {
      background: #fff;
      color: #1f1f1f;
      border-color: #dadce0;
    }
    .signin-btn-google:hover {
      background: #f8f9fa;
      border-color: #c4c7cc;
    }

    .signin-divider {
      display: flex;
      align-items: center;
      gap: 16px;
      margin: 20px 0;
      color: var(--text-muted);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .signin-divider::before,
    .signin-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    /* Phone / Email form panels */
    .signin-panel {
      display: none;
      animation: fadeInUp 0.3s ease;
    }
    .signin-panel.active { display: block; }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
      text-align: left;
    }
    .input-group label {
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    .input-field {
      width: 100%;
      padding: 14px 16px;
      font-size: 1rem;
      font-family: var(--font);
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      color: var(--text-primary);
      outline: none;
      transition: border-color var(--transition), box-shadow var(--transition);
    }
    .input-field::placeholder { color: var(--text-muted); }
    .input-field:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-dim);
    }

    textarea.input-field {
      resize: vertical;
      min-height: 120px;
      line-height: 1.6;
    }
    #details-textarea {
      min-height: 210px;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      color: var(--text-muted);
      cursor: pointer;
      margin-top: 20px;
      transition: color var(--transition);
      background: none;
      border: none;
      font-family: var(--font);
    }
    .back-link:hover { color: var(--accent); }

    /* ======================================================
       Buttons (shared)
       ====================================================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: var(--radius);
      font-size: 1rem;
      font-weight: 600;
      font-family: var(--font);
      text-decoration: none;
      cursor: pointer;
      border: none;
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition), opacity var(--transition);
    }
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }
    .btn-accent {
      background: var(--accent);
      color: var(--bg-primary);
    }
    .btn-accent:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 0 40px rgba(80, 165, 219, 0.3), 0 0 80px rgba(80, 165, 219, 0.1);
    }
    .btn-secondary-outline {
      background: transparent;
      color: var(--text-primary);
      border: 1.5px solid var(--border);
    }
    .btn-secondary-outline:hover:not(:disabled) {
      border-color: var(--accent);
      color: var(--accent);
      transform: translateY(-1px);
    }
    .btn-full { width: 100%; }
    .btn-large {
      padding: 16px 32px;
      font-size: 1.05rem;
      border-radius: var(--radius-lg);
    }

    /* ======================================================
       Inline Error / Success Messages
       ====================================================== */
    .msg {
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 0.85rem;
      margin-top: 12px;
      display: none;
      text-align: left;
    }
    .msg.visible { display: block; animation: fadeIn 0.2s ease; }
    .msg-error {
      background: var(--error-dim);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    .msg-success {
      background: rgba(34, 197, 94, 0.1);
      color: var(--success);
      border: 1px solid rgba(34, 197, 94, 0.2);
    }
    .msg-info {
      background: var(--accent-dim);
      color: var(--accent);
      border: 1px solid rgba(80, 165, 219, 0.15);
    }

    /* ======================================================
       Location Permission Modal
       ====================================================== */
    .location-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }
    .location-modal {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: fadeInScale 0.3s ease;
    }
    .location-modal-icon {
      margin-bottom: 16px;
      color: var(--accent);
    }
    .location-modal h3 {
      color: var(--text-primary);
      font-size: 1.15rem;
      margin-bottom: 8px;
    }
    .location-modal p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 24px;
    }
    .location-modal-actions {
      display: flex;
      gap: 12px;
    }
    .location-modal-actions button {
      flex: 1;
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: var(--transition);
    }
    .location-modal-actions .btn-allow {
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      color: #fff;
    }
    .location-modal-actions .btn-allow:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-accent);
    }
    .location-modal-actions .btn-skip {
      background: var(--bg-input);
      color: var(--text-secondary);
      border: 1px solid var(--border);
    }
    .location-modal-actions .btn-skip:hover {
      border-color: var(--border-hover);
      color: var(--text-primary);
    }

    /* ======================================================
       Loading dots
       ====================================================== */
    .loading-dots {
      display: inline-flex;
      gap: 4px;
      align-items: center;
    }
    .loading-dots span {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      animation: dotPulse 1.4s ease-in-out infinite;
    }
    .loading-dots span:nth-child(2) { animation-delay: 0.16s; }
    .loading-dots span:nth-child(3) { animation-delay: 0.32s; }

    /* ======================================================
       Screen 3b: Details + Upload
       ====================================================== */
    .screen-details {
      padding: 24px;
      position: relative;
      z-index: 1;
      width: 100%;
    }
    .details-card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 36px 32px;
      animation: fadeInScale 0.35s ease;
    }
    .details-card h2 {
      font-size: 1.4rem;
      font-weight: 800;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }
    .details-card .details-subtitle {
      font-size: 0.88rem;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .selected-business-badge {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: var(--accent-dim);
      border: 1px solid rgba(80, 165, 219, 0.15);
      border-radius: var(--radius);
      margin-bottom: 24px;
    }
    .selected-business-badge .badge-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      background: var(--accent-dim);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .selected-business-badge .badge-text { text-align: left; }
    .selected-business-badge .badge-name {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--accent);
    }
    .selected-business-badge .badge-addr {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .uppy-section {
      margin: 20px 0;
    }
    .uppy-section label {
      display: block;
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 8px;
      text-align: left;
    }
    #uppy-dashboard-area {
      border-radius: var(--radius);
      overflow: hidden;
    }

    /* Uppy dark theme overrides */
    .uppy-Dashboard-inner {
      background: var(--bg-input) !important;
      border-color: var(--border) !important;
    }

    /* ======================================================
       Screen 4: Waiting
       ====================================================== */
    .screen-waiting {
      padding: 24px;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    .waiting-content {
      max-width: 480px;
      animation: fadeInScale 0.4s ease;
    }
    .waiting-anim {
      width: 160px;
      height: 160px;
      margin: 0 auto 32px;
      position: relative;
    }
    .waiting-anim-ring {
      position: absolute;
      border-radius: 50%;
      border: 3px solid transparent;
      animation: waitSpin 2.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
    }
    .waiting-anim-ring:nth-child(1) {
      inset: 0;
      border-top-color: var(--accent);
      border-right-color: var(--accent);
    }
    .waiting-anim-ring:nth-child(2) {
      inset: 18px;
      border-bottom-color: #7c3aed;
      border-left-color: #7c3aed;
      animation-delay: -0.4s;
      animation-direction: reverse;
    }
    .waiting-anim-ring:nth-child(3) {
      inset: 36px;
      border-top-color: #3b82f6;
      border-right-color: #3b82f6;
      animation-delay: -0.8s;
    }
    .waiting-anim-icon {
      position: absolute;
      inset: 52px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: waitPulse 2s ease-in-out infinite;
    }
    @keyframes waitSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes waitPulse {
      0%, 100% { opacity: 0.7; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.15); }
    }
    .waiting-title {
      font-size: clamp(1.4rem, 3vw, 1.8rem);
      font-weight: 800;
      margin-bottom: 10px;
      letter-spacing: -0.02em;
    }
    .waiting-subtitle {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    .waiting-contact {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 16px;
    }
    .waiting-status {
      margin-top: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .waiting-status .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s ease-in-out infinite;
    }

    /* ======================================================
       Responsive
       ====================================================== */
    @media (max-width: 640px) {
      .signin-card, .details-card {
        padding: 28px 20px;
      }
      .search-input {
        font-size: 1rem;
        padding: 16px 18px 16px 48px;
      }
      .hero-brand h1 {
        font-size: 2rem;
      }
    }
    @media (max-width: 380px) {
      .header { padding: 0 16px; }
      .screen-search, .screen-signin, .screen-details, .screen-waiting, .screen-legal {
        padding: 16px;
      }
    }

    /* ======================================================
       Legal Pages (Privacy, Terms, Content Policy)
       ====================================================== */
    .screen-legal {
      padding: 40px 24px 80px;
      min-height: auto;
    }
    .screen-legal.active {
      justify-content: flex-start;
      align-items: flex-start;
    }
    .legal-container {
      max-width: 760px;
      width: 100%;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    .legal-container h2 {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .legal-container .legal-updated {
      color: var(--text-muted);
      font-size: 0.85rem;
      margin-bottom: 32px;
    }
    .legal-container h3 {
      color: var(--accent);
      font-size: 1.15rem;
      font-weight: 700;
      margin: 28px 0 12px;
    }
    .legal-container p,
    .legal-container li {
      color: var(--text-secondary);
      font-size: 0.92rem;
      line-height: 1.7;
      margin-bottom: 12px;
    }
    .legal-container ul {
      padding-left: 20px;
      margin-bottom: 16px;
    }
    .legal-container a {
      color: var(--accent);
      text-decoration: none;
    }
    .legal-container a:hover {
      text-decoration: underline;
    }
    .legal-back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-muted);
      font-size: 0.85rem;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      margin-bottom: 24px;
      transition: color 0.2s;
    }
    .legal-back:hover { color: var(--accent); }

    /* ======================================================
       Marketing Sections (visible on search screen)
       ====================================================== */
    .marketing-sections {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 24px;
      position: relative;
      z-index: 1;
    }

    .section-title {
      text-align: center;
      font-size: clamp(1.6rem, 3.5vw, 2.4rem);
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 12px;
    }
    .section-subtitle {
      text-align: center;
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 48px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* ── How It Works ─────────────────────────────── */
    #how-it-works { padding: 80px 0 60px; }

    .steps-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 28px;
    }
    .step-card {
      text-align: center;
      padding: 36px 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
    }
    .step-card:hover {
      transform: translateY(-4px);
      border-color: var(--border-hover);
      box-shadow: var(--shadow-accent);
    }
    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      color: #ffffff;
      font-weight: 800;
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    .step-card h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 10px;
    }
    .step-card p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* ── Features / Selling Points ────────────────── */
    #features { padding: 60px 0; }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }
    .feature-card {
      padding: 32px 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
    }
    .feature-card:hover {
      transform: translateY(-3px);
      border-color: var(--border-hover);
      box-shadow: var(--shadow-accent);
    }
    .feature-card:last-child {
      grid-column: 2;
    }
    .feature-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
    }
    .feature-icon svg {
      width: 24px;
      height: 24px;
      color: var(--accent);
    }
    .feature-card h3 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .feature-card p {
      font-size: 0.88rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* ── Competitor Comparison ─────────────────────── */
    #comparison { padding: 60px 0; }

    .comparison-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }
    .comparison-table th,
    .comparison-table td {
      padding: 16px 18px;
      text-align: center;
      font-size: 0.9rem;
      border-bottom: 1px solid var(--border);
    }
    .comparison-table thead th {
      background: var(--bg-secondary);
      font-weight: 700;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--text-secondary);
    }
    .comparison-table thead th:first-child {
      text-align: left;
    }
    .comparison-table thead th.highlight {
      color: var(--accent);
      background: rgba(80, 165, 219, 0.06);
    }
    .comparison-table tbody td:first-child {
      text-align: left;
      font-weight: 600;
      color: var(--text-primary);
    }
    .comparison-table tbody td.highlight {
      background: rgba(80, 165, 219, 0.04);
      color: var(--accent);
      font-weight: 600;
    }
    .comparison-table tbody tr:last-child td {
      border-bottom: none;
    }
    .check-icon { color: var(--success); font-weight: 700; }
    .cross-icon { color: var(--text-muted); }

    /* ── Pricing ──────────────────────────────────── */
    #pricing { padding: 60px 0; }

    .pricing-card {
      max-width: 420px;
      margin: 0 auto;
      text-align: center;
      background: var(--bg-card);
      border: 2px solid var(--accent);
      border-radius: var(--radius-lg);
      padding: 48px 36px;
      box-shadow: var(--shadow-accent);
    }
    .pricing-card .plan-label {
      display: inline-block;
      background: var(--accent);
      color: var(--bg-primary);
      font-size: 0.75rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 4px 14px;
      border-radius: 20px;
      margin-bottom: 20px;
    }
    .pricing-card-free .plan-label {
      display: inline-block;
      padding: 5px 15px;
      margin-bottom: 15px;
      margin-top: 10px;
      font-size: 0.75rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      border-radius: 20px;
    }
    .pricing-price {
      font-size: 3.5rem;
      font-weight: 900;
      letter-spacing: -0.04em;
      color: var(--text-primary);
      line-height: 1;
      margin-bottom: 4px;
      min-height: 3.5rem;
    }
    .pricing-price span {
      font-size: 1.2rem;
      font-weight: 500;
      color: var(--text-secondary);
    }
    .pricing-desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 28px;
    }
    .pricing-features {
      list-style: none;
      text-align: left;
      margin-bottom: 32px;
    }
    .pricing-features li {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 0;
      font-size: 0.9rem;
      color: var(--text-primary);
      border-bottom: 1px solid rgba(255,255,255,0.04);
    }
    .pricing-features li:last-child { border-bottom: none; }
    .pricing-features li svg {
      flex-shrink: 0;
      width: 18px;
      height: 18px;
      color: var(--accent);
    }

    /* ── Footer ───────────────────────────────────── */
    .site-footer {
      border-top: 1px solid var(--border);
      padding: 48px 24px 32px;
      margin-top: 60px;
      position: relative;
      z-index: 1;
    }
    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }
    .footer-links {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.88rem;
      transition: color var(--transition);
    }
    .footer-links a:hover { color: var(--accent); }

    .footer-social {
      display: flex;
      gap: 16px;
    }
    .footer-social a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      transition: color 0.2s ease, transform 0.2s ease;
    }
    .footer-social a:hover { transform: scale(1.15); }
    .footer-social a[aria-label="GitHub"]:hover { color: #f0f6fc; }
    .footer-social a[aria-label="X"]:hover { color: #f0f6fc; }
    .footer-social a[aria-label="LinkedIn"]:hover { color: #0a66c2; }
    .footer-social a[aria-label="YouTube"]:hover { color: #ff0000; }
    .footer-social a[aria-label="Instagram"]:hover { color: #e4405f; }
    .footer-social a[aria-label="Facebook"]:hover { color: #1877f2; }
    .footer-social a svg {
      width: 18px;
      height: 18px;
    }

    .footer-bottom {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      font-size: 0.82rem;
      color: var(--text-muted);
    }
    .footer-bottom a {
      color: var(--text-muted);
      text-decoration: none;
    }
    .footer-bottom a:hover { color: var(--accent); }

    /* ── Hero CTAs ────────────────────────────────── */
    .hero-ctas {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-top: 24px;
      animation: fadeInUp 0.6s ease 0.45s both;
    }
    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
      border: 1.5px solid var(--border);
      padding: 12px 24px;
      border-radius: var(--radius);
      font-size: 0.95rem;
      font-weight: 600;
      font-family: var(--font);
      cursor: pointer;
      text-decoration: none;
      transition: color var(--transition), border-color var(--transition);
    }
    .btn-ghost:hover {
      color: var(--accent);
      border-color: var(--accent);
    }
    .hero-clarify {
      font-size: 0.82rem;
      color: var(--text-muted);
      margin-top: 12px;
      animation: fadeInUp 0.6s ease 0.5s both;
    }
    .hero-clarify strong { color: var(--accent); font-weight: 600; }

    /* ── Proof / Gallery ─────────────────────────── */
    #proof { padding: 80px 0 60px; }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 48px;
    }
    .site-thumb {
      position: relative;
      border-radius: var(--radius-lg);
      overflow: hidden;
      aspect-ratio: 16/10;
      background: var(--bg-card);
      border: 1px solid var(--border);
      transition: transform var(--transition), box-shadow var(--transition);
      cursor: pointer;
    }
    .site-thumb:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-accent);
    }
    .site-thumb-preview {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .site-thumb-bar {
      height: 28px;
      background: var(--bg-secondary);
      display: flex;
      align-items: center;
      padding: 0 10px;
      gap: 5px;
    }
    .site-thumb-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
      opacity: 0.4;
    }
    .site-thumb-body {
      flex: 1;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .site-thumb-hero-block {
      height: 40%;
      border-radius: 6px;
      opacity: 0.7;
    }
    .site-thumb-line {
      height: 6px;
      border-radius: 3px;
      background: var(--border);
    }
    .site-thumb-line.short { width: 60%; }
    .site-thumb-label {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px 14px;
      background: linear-gradient(transparent, rgba(10,10,26,0.95));
    }
    .site-thumb-name {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--text-primary);
    }
    .site-thumb-industry {
      font-size: 0.72rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Testimonials */
    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }
    .testimonial-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 28px 24px;
    }
    .testimonial-stars {
      color: #fbbf24;
      font-size: 0.9rem;
      margin-bottom: 12px;
      letter-spacing: 2px;
    }
    .testimonial-quote {
      font-size: 0.92rem;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 16px;
      font-style: italic;
    }
    .testimonial-author {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .testimonial-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--bg-primary);
      flex-shrink: 0;
    }
    .testimonial-name {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    .testimonial-role {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* ── What's Handled (value prop) ─────────────── */
    #handled { padding: 60px 0; }
    .handled-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }
    .handled-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 32px 24px;
      text-align: center;
    }
    .handled-card .handled-icon {
      width: 56px;
      height: 56px;
      border-radius: 14px;
      background: var(--accent-dim);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
    }
    .handled-card .handled-icon svg {
      width: 28px;
      height: 28px;
      color: var(--accent);
    }
    .handled-card h3 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .handled-card p {
      font-size: 0.88rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    .handled-summary {
      text-align: center;
      margin-top: 32px;
      padding: 24px;
      background: var(--accent-dim);
      border: 1px solid rgba(80,165,219,0.15);
      border-radius: var(--radius-lg);
      font-size: 0.95rem;
      color: var(--text-primary);
      line-height: 1.7;
    }
    .handled-summary strong { color: var(--accent); }

    /* ── Done-for-you vs DIY ─────────────────────── */
    #dvd { padding: 60px 0; }
    .dvd-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    .dvd-column {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }
    .dvd-column.dvd-highlight {
      border: 2px solid var(--accent);
      box-shadow: var(--shadow-accent);
    }
    .dvd-column.dvd-other {
      border: 1px solid var(--border);
    }
    .dvd-header {
      padding: 20px 24px;
      font-weight: 700;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }
    .dvd-highlight .dvd-header {
      background: rgba(80,165,219,0.06);
      color: var(--accent);
    }
    .dvd-other .dvd-header {
      background: var(--bg-secondary);
      color: var(--text-secondary);
    }
    .dvd-list {
      padding: 16px 24px 24px;
      list-style: none;
    }
    .dvd-list li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 0;
      font-size: 0.9rem;
      border-bottom: 1px solid rgba(255,255,255,0.04);
      line-height: 1.5;
    }
    .dvd-list li:last-child { border-bottom: none; }
    .dvd-list li svg {
      flex-shrink: 0;
      width: 18px;
      height: 18px;
      margin-top: 2px;
    }
    .dvd-highlight .dvd-list li svg { color: var(--accent); }
    .dvd-other .dvd-list li svg { color: var(--text-muted); }
    .dvd-highlight .dvd-list li { color: var(--text-primary); }
    .dvd-other .dvd-list li { color: var(--text-secondary); }

    /* ── FAQ ──────────────────────────────────────── */
    #faq { padding: 60px 0; }
    .faq-list {
      max-width: 740px;
      margin: 0 auto;
    }
    .faq-item {
      border-bottom: 1px solid var(--border);
    }
    .faq-question {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 0;
      background: none;
      border: none;
      color: var(--text-primary);
      font-size: 1rem;
      font-weight: 600;
      font-family: var(--font);
      cursor: pointer;
      text-align: left;
      line-height: 1.5;
      transition: color var(--transition);
    }
    .faq-question:hover { color: var(--accent); }
    .faq-question svg {
      flex-shrink: 0;
      width: 20px;
      height: 20px;
      color: var(--text-muted);
      transition: transform var(--transition);
    }
    .faq-item.open .faq-question svg {
      transform: rotate(180deg);
    }
    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    .faq-item.open .faq-answer {
      max-height: 400px;
    }
    .faq-answer-inner {
      padding: 0 0 20px;
      text-align: left;
      font-size: 0.92rem;
      color: var(--text-secondary);
      line-height: 1.7;
    }

    /* ── Pricing (updated) ───────────────────────── */
    .pricing-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 32px;
    }
    .pricing-toggle-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
      cursor: pointer;
    }
    .pricing-toggle-label.active { color: var(--text-primary); font-weight: 700; }
    .pricing-toggle-switch {
      width: 48px;
      height: 26px;
      border-radius: 13px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      position: relative;
      cursor: pointer;
      transition: background var(--transition), border-color var(--transition);
    }
    .pricing-toggle-switch.annual {
      background: var(--accent-dim);
      border-color: var(--accent);
    }
    .pricing-toggle-switch::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--text-secondary);
      top: 2px;
      left: 2px;
      transition: transform var(--transition), background var(--transition);
    }
    .pricing-toggle-switch.annual::after {
      transform: translateX(22px);
      background: var(--accent);
    }
    .pricing-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: start;
      gap: 24px;
      max-width: 840px;
      margin: 0 auto;
    }
    .pricing-grid > .pricing-card {
      max-width: none;
      margin: 0;
    }
    .pricing-card-free {
      background: linear-gradient(135deg, rgba(80,165,219,0.04), rgba(124,58,237,0.04));
      border: 2px dashed var(--accent);
      border-radius: var(--radius-lg);
      padding: 36px 28px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .pricing-card-free::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--secondary));
    }
    .pricing-save-badge {
      display: inline-block;
      background: var(--success);
      color: var(--bg-primary);
      font-size: 0.72rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      padding: 3px 10px;
      border-radius: 12px;
      margin-left: 8px;
    }
    .pricing-guarantee {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 24px;
      font-size: 0.82rem;
      color: var(--text-muted);
    }
    .pricing-guarantee svg {
      width: 16px;
      height: 16px;
      color: var(--success);
      flex-shrink: 0;
    }
    .pricing-original {
      text-decoration: line-through;
      color: var(--text-muted);
      font-size: 1.2rem;
      margin-right: 4px;
    }

    /* ── Responsive (marketing) ───────────────────── */
    @media (max-width: 768px) {
      .steps-row { grid-template-columns: 1fr; }
      .features-grid { grid-template-columns: 1fr; }
      .feature-card:last-child { grid-column: auto; }
      .gallery-grid { grid-template-columns: repeat(2, 1fr); }
      .testimonials-grid { grid-template-columns: 1fr; }
      .handled-grid { grid-template-columns: 1fr; }
      .dvd-grid { grid-template-columns: 1fr; }
      .pricing-grid { grid-template-columns: 1fr; max-width: 440px; }
      .pricing-card { padding: 36px 24px; }
      .hero-ctas { flex-direction: column; gap: 10px; }
    }
    @media (max-width: 480px) {
      .gallery-grid { grid-template-columns: 1fr; }
    }
  </style>

  <!-- PostHog Tracking -->
  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing startSessionRecording stopSessionRecording isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getBootstrapData setPersonProperties setPersonPropertiesForFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    /* __POSTHOG_INIT__ - replaced at serve time by Worker with real API key */
    var __phKey = document.querySelector('meta[name="x-posthog-key"]');
    if (__phKey && __phKey.content && __phKey.content !== 'none') {
      posthog.init(__phKey.content, { api_host: 'https://us.i.posthog.com', person_profiles: 'identified_only' });
    }
  </script>
</head>
<body>

  <!-- Background orbs -->
  <div class="bg-orbs">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a class="logo" onclick="navigateTo('search')">
        <img src="/logo-header.png" alt="Project Sites" style="flex-shrink:0; height:auto; max-height:48px; max-width:300px;">
      </a>
    </div>
  </header>

  <!-- App Container -->
  <div class="app">

    <!-- ==========================================
         Screen 1: Hero / Search
         ========================================== -->
    <div id="screen-search" class="screen screen-search active">
      <div class="hero-brand">
        <h1>Your Website &mdash;<br><span class="gradient-text">Handled. Finally.</span></h1>
        <p class="tagline">We build, launch, and maintain your business website so you don't have to.</p>
      </div>

      <div class="search-wrapper">
        <div class="search-input-wrap">
          <span class="search-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
            </svg>
          </span>
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="Enter your business name..."
            autocomplete="off"
            spellcheck="false"
          />
          <div id="search-spinner" class="search-spinner"></div>
        </div>

        <div id="search-dropdown" class="search-dropdown"></div>
      </div>

      <p class="search-hint">Search for your business to generate a free preview &mdash; no account or credit card required.</p>

      <div class="hero-ctas">
        <a href="#proof" class="btn-ghost">See examples &darr;</a>
      </div>
      <p class="hero-clarify"><strong>Free preview</strong> includes a full AI-generated site. Pay only when you're ready to go live.</p>

      <div id="search-error" class="msg msg-error"></div>

      <!-- ==========================================
           Marketing Sections (scroll down)
           ========================================== -->
      <div class="marketing-sections">

        <!-- Example Sites Gallery + Testimonials -->
        <section id="proof">
          <h2 class="section-title">Sites We've Built</h2>
          <p class="section-subtitle">Real businesses, real websites &mdash; generated in minutes, not months.</p>

          <div class="gallery-grid">
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#065f46,#10b981)"></div>
                  <div class="site-thumb-line" style="width:75%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Greenleaf Landscaping</div><div class="site-thumb-industry">Landscaping</div></div>
            </div>
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#1e3a5f,#3b82f6)"></div>
                  <div class="site-thumb-line" style="width:80%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Precision Plumbing Co.</div><div class="site-thumb-industry">Home Services</div></div>
            </div>
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#7c2d12,#f97316)"></div>
                  <div class="site-thumb-line" style="width:70%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Bella's Italian Kitchen</div><div class="site-thumb-industry">Restaurant</div></div>
            </div>
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#581c87,#a855f7)"></div>
                  <div class="site-thumb-line" style="width:85%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Serenity Spa &amp; Wellness</div><div class="site-thumb-industry">Health &amp; Beauty</div></div>
            </div>
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#1e3a5f,#06b6d4)"></div>
                  <div class="site-thumb-line" style="width:72%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Summit Auto Repair</div><div class="site-thumb-industry">Automotive</div></div>
            </div>
            <div class="site-thumb">
              <div class="site-thumb-preview">
                <div class="site-thumb-bar"><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span><span class="site-thumb-dot"></span></div>
                <div class="site-thumb-body">
                  <div class="site-thumb-hero-block" style="background:linear-gradient(135deg,#4a1d96,#ec4899)"></div>
                  <div class="site-thumb-line" style="width:78%"></div>
                  <div class="site-thumb-line short"></div>
                </div>
              </div>
              <div class="site-thumb-label"><div class="site-thumb-name">Swift Tax Advisors</div><div class="site-thumb-industry">Professional Services</div></div>
            </div>
          </div>

          <h3 class="section-title" style="font-size:1.4rem; margin-bottom:8px;">What Business Owners Say</h3>
          <p class="section-subtitle">Join hundreds of small businesses that stopped worrying about their website.</p>

          <div class="testimonials-grid">
            <div class="testimonial-card">
              <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
              <p class="testimonial-quote">"I searched my business name and had a professional website in under 10 minutes. I've been paying a web guy $200/month for years &mdash; wish I found this sooner."</p>
              <div class="testimonial-author">
                <div class="testimonial-avatar" style="background:#10b981">MR</div>
                <div>
                  <div class="testimonial-name">Maria R.</div>
                  <div class="testimonial-role">Owner, Greenleaf Landscaping</div>
                </div>
              </div>
            </div>
            <div class="testimonial-card">
              <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
              <p class="testimonial-quote">"The AI actually researched my business and wrote accurate copy. I changed two sentences and went live. Best part: I never have to think about updates."</p>
              <div class="testimonial-author">
                <div class="testimonial-avatar" style="background:#3b82f6">JT</div>
                <div>
                  <div class="testimonial-name">James T.</div>
                  <div class="testimonial-role">Owner, Precision Plumbing Co.</div>
                </div>
              </div>
            </div>
            <div class="testimonial-card">
              <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
              <p class="testimonial-quote">"I tried Wix and Squarespace but never finished building my site. With Project Sites, it was done for me. I just approved it and went live the same day."</p>
              <div class="testimonial-author">
                <div class="testimonial-avatar" style="background:#a855f7">SK</div>
                <div>
                  <div class="testimonial-name">Sarah K.</div>
                  <div class="testimonial-role">Owner, Serenity Spa &amp; Wellness</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- How It Works -->
        <section id="how-it-works">
          <h2 class="section-title">How It Works</h2>
          <p class="section-subtitle">Three steps. Five minutes. Zero technical skills required.</p>
          <div class="steps-row">
            <div class="step-card">
              <div class="step-number">1</div>
              <h3>Search for Your Business</h3>
              <p>Type your business name above. We pull in your info from Google and start building a preview instantly &mdash; no account needed.</p>
            </div>
            <div class="step-card">
              <div class="step-number">2</div>
              <h3>Review Your AI-Built Site</h3>
              <p>Our AI researches your business, writes original content, and designs a mobile-first site with local SEO built in. Review and request changes.</p>
            </div>
            <div class="step-card">
              <div class="step-number">3</div>
              <h3>Go Live &mdash; We Handle the Rest</h3>
              <p>Approve your site and it goes live. We maintain it, keep it updated, and handle any change requests. You focus on your business.</p>
            </div>
          </div>
        </section>

        <!-- What's Handled (value prop) -->
        <section id="handled">
          <h2 class="section-title">What "Handled" Actually Means</h2>
          <p class="section-subtitle">We set it up, keep it updated, and you can request changes anytime.</p>

          <div class="handled-grid">
            <div class="handled-card">
              <div class="handled-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/>
                </svg>
              </div>
              <h3>Unlimited Change Requests</h3>
              <p>Need to update your hours, add a new service, or change a photo? Just tell us. Most changes go live within 24 hours.</p>
            </div>
            <div class="handled-card">
              <div class="handled-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
              </div>
              <h3>Security &amp; Uptime</h3>
              <p>SSL certificates, DDoS protection, and 99.9% uptime &mdash; all included. We monitor your site so you never have to worry.</p>
            </div>
            <div class="handled-card">
              <div class="handled-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
                </svg>
              </div>
              <h3>Local SEO Basics</h3>
              <p>NAP consistency, schema markup, meta tags, sitemap, and indexability &mdash; all configured out of the box for local search visibility.</p>
            </div>
          </div>

          <div class="handled-summary">
            <strong>In short:</strong> You tell us what to change, we do it. You never touch code, fight with a page builder, or worry about hosting. That's what "handled" means.
          </div>
        </section>

        <!-- Done-for-you vs DIY -->
        <section id="dvd">
          <h2 class="section-title">Done-for-You vs. DIY</h2>
          <p class="section-subtitle">Other platforms give you tools. We give you a finished website &mdash; and keep it running.</p>

          <div class="dvd-grid">
            <div class="dvd-column dvd-highlight">
              <div class="dvd-header">Project Sites (Done-for-You)</div>
              <ul class="dvd-list">
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  AI writes your content from real business data
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Site designed and launched in minutes
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Unlimited change requests &mdash; we do the work
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Hosting, SSL, domain, SEO &mdash; all included
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Ongoing maintenance handled for you
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  No technical skills required &mdash; ever
                </li>
              </ul>
            </div>
            <div class="dvd-column dvd-other">
              <div class="dvd-header">DIY Builders (Squarespace, Wix, etc.)</div>
              <ul class="dvd-list">
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  You write all content yourself (AI assist available)
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  Hours to days learning the builder + designing
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  Every update is your responsibility
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  Domain, SEO plugins, and extras cost more
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  You manage updates, security, and performance
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  Requires learning a page builder interface
                </li>
              </ul>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section id="faq">
          <h2 class="section-title">Frequently Asked Questions</h2>
          <p class="section-subtitle">Everything you need to know before getting started.</p>

          <div class="faq-list">
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                How accurate is the AI-generated content?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">Our AI researches your business using Google, public listings, and any info you provide. It generates original, accurate content specific to your services, location, and industry. You review everything before going live and can request unlimited changes.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                Can I edit the content myself?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">Yes. You can request any changes &mdash; text, images, layout, colors &mdash; and we'll make them for you, typically within 24 hours. You never need to learn a page builder or write code.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                What if my business info is wrong online?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">No problem. After the AI generates your site, you can provide corrections and additional context. We'll update the content to match the real details of your business. The preview is a starting point, not the final product.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                Do I own the website and content?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">Yes. All content generated for your site belongs to you. If you cancel, you can request an export of your site's content. Your business data is never shared or sold.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                Can I use my own domain or transfer my site out?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">Absolutely. Every paid plan includes a custom domain with automatic SSL. You can bring your own domain or register a new one. If you ever want to leave, we'll help you export your content.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                What happens if I cancel?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">You can cancel anytime with no penalty. Your site stays live through the end of your billing period. We offer a 14-day money-back guarantee on your first payment &mdash; if it's not right for you, you get a full refund.</div></div>
            </div>
            <div class="faq-item">
              <button class="faq-question" onclick="toggleFaq(this)">
                What's included in the free preview?
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </button>
              <div class="faq-answer"><div class="faq-answer-inner">The free preview gives you a fully AI-generated website for your business &mdash; no account or credit card required. You can see exactly what your site will look like before paying anything. Pay only when you're ready to publish with a custom domain.</div></div>
            </div>
          </div>
        </section>

        <!-- Pricing -->
        <section id="pricing">
          <h2 class="section-title">Simple, Transparent Pricing</h2>
          <p class="section-subtitle">Start free. Pay only when you're ready to go live.</p>

          <div id="pricing-toggle" class="pricing-toggle">
            <span class="pricing-toggle-label active" id="toggle-monthly">Monthly</span>
            <div class="pricing-toggle-switch" id="toggle-switch" onclick="togglePricing()"></div>
            <span class="pricing-toggle-label" id="toggle-annual">Annual <span class="pricing-save-badge">Save $120</span></span>
          </div>

          <div class="pricing-grid">
            <div class="pricing-card-free">
              <div class="plan-label" style="background:linear-gradient(135deg, var(--accent), var(--secondary)); color:#fff;">Free Preview</div>
              <div class="pricing-price">$0</div>
              <p class="pricing-desc">See your AI-generated site before committing.</p>
              <ul class="pricing-features">
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Full AI-generated website preview
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  No account or credit card required
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Hosted on free subdomain
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Includes "Powered by Project Sites" banner
                </li>
              </ul>
              <button class="btn btn-secondary-outline btn-large btn-full" onclick="searchInput.focus(); window.scrollTo({top:0,behavior:'smooth'})">
                Generate Free Preview
              </button>
            </div>

            <div class="pricing-card">
              <div class="plan-label">All-Inclusive</div>
              <div class="pricing-price" id="pricing-amount">$50<span>/mo</span></div>
              <p class="pricing-desc" id="pricing-desc-text">Everything you need to run a professional business website.</p>
              <ul class="pricing-features">
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  AI-generated content &amp; design
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Custom domain + SSL included
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Mobile-first, SEO-optimized
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Built-in analytics dashboard
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  Unlimited updates &amp; maintenance
                </li>
                <li>
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  No branding &mdash; 100% your brand
                </li>
              </ul>
              <button class="btn btn-accent btn-large btn-full" onclick="searchInput.focus(); window.scrollTo({top:0,behavior:'smooth'})">
                Get Started
              </button>
              <div class="pricing-guarantee">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                14-day money-back guarantee &mdash; cancel anytime
              </div>
            </div>
          </div>
        </section>

      </div><!-- /.marketing-sections -->
    </div>

    <!-- ==========================================
         Screen 3: Sign-In Gate
         ========================================== -->
    <div id="screen-signin" class="screen screen-signin">
      <div class="signin-card">
        <h2>Sign in to claim your website</h2>
        <p class="signin-subtitle">Create your account to get started.</p>

        <!-- Main sign-in options -->
        <div id="signin-methods" class="signin-methods">
          <button class="signin-btn signin-btn-google" onclick="signInWithGoogle()">
            <svg width="20" height="20" viewBox="0 0 48 48">
              <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
              <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
              <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
              <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
            </svg>
            Continue with Google
          </button>

          <div class="signin-divider">or</div>

          <button class="signin-btn" onclick="showSigninPanel('email')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
            Sign in with Email
          </button>
        </div>

        <!-- Email panel -->
        <div id="signin-email-panel" class="signin-panel">
          <div id="email-step-input">
            <div class="input-group">
              <label for="email-input">Email Address</label>
              <input type="email" id="email-input" class="input-field" placeholder="you@example.com" />
            </div>
            <button class="btn btn-accent btn-full" id="email-send-btn" onclick="sendMagicLink()">
              Send Magic Link
            </button>
            <div id="email-send-msg" class="msg"></div>
          </div>

          <div id="email-step-sent" style="display:none;">
            <div class="msg msg-success visible" style="text-align:center; margin-top:12px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:inline-block; vertical-align:middle; margin-right:6px;">
                <rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
              </svg>
              Check your email for a sign-in link!
            </div>
          </div>

          <button class="back-link" onclick="showSigninPanel('main')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m15 18-6-6 6-6"/>
            </svg>
            Back to sign-in options
          </button>
        </div>

        <!-- Back to search -->
        <button class="back-link" id="signin-back-to-search" onclick="navigateTo('search')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          Back to search
        </button>
      </div>
    </div>

    <!-- ==========================================
         Screen 3b: Details + File Upload
         ========================================== -->
    <div id="screen-details" class="screen screen-details">
      <div class="details-card">
        <h2 id="details-title">Tell us more about your business</h2>
        <p class="details-subtitle" id="details-subtitle">Include everything important for your website. We'll also search the web for public info about your business.</p>

        <!-- Selected business display -->
        <div id="details-business-badge" class="selected-business-badge" style="display:none;">
          <div class="badge-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#50a5db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
          </div>
          <div class="badge-text">
            <div class="badge-name" id="badge-biz-name"></div>
            <div class="badge-addr" id="badge-biz-addr"></div>
          </div>
        </div>

        <!-- Manual business info (shown when no business selected from search) -->
        <div id="details-manual-fields" style="display:none;">
          <div class="input-group">
            <label for="business-name-input">Business Name</label>
            <input type="text" id="business-name-input" class="input-field" placeholder="e.g. Vito's Men's Salon" maxlength="200" />
          </div>
          <div class="input-group">
            <label for="business-address-input">Business Address (optional)</label>
            <input type="text" id="business-address-input" class="input-field" placeholder="e.g. 74 N Beverwyck Rd, Lake Hiawatha, NJ 07034" maxlength="500" />
          </div>
        </div>

        <div class="input-group">
          <label for="details-textarea">Tell us about your business</label>
          <textarea
            id="details-textarea"
            class="input-field"
            maxlength="5000"
            placeholder="Share details like your phone number, email address, physical address, business hours, services offered, brand colors, style preferences, or any specific features you'd like on your website. On top of the information you provide here, we'll also intelligently search the internet for public data about your business to help build the best possible site."
          ></textarea>
        </div>

        <div class="uppy-section">
          <label>Upload Logos, Photos, Menus, or Documents</label>
          <div id="uppy-dashboard-area"></div>
        </div>

        <button class="btn btn-accent btn-large btn-full" id="build-btn" onclick="submitBuild()">
          Build My Website
        </button>

        <div id="build-msg" class="msg"></div>

        <button class="back-link" onclick="navigateTo('search')">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          Back to search
        </button>
      </div>
    </div>

    <!-- ==========================================
         Screen 4: Waiting (Lottie Cat)
         ========================================== -->
    <div id="screen-waiting" class="screen screen-waiting">
      <div class="waiting-content">
        <div class="waiting-anim">
          <div class="waiting-anim-ring"></div>
          <div class="waiting-anim-ring"></div>
          <div class="waiting-anim-ring"></div>
          <div class="waiting-anim-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/>
              <circle cx="7.5" cy="6" r="0.8" fill="var(--accent)" stroke="none"/><circle cx="10.5" cy="6" r="0.8" fill="#7c3aed" stroke="none"/>
              <line x1="7" y1="13" x2="17" y2="13" opacity="0.5"/><line x1="7" y1="16.5" x2="14" y2="16.5" opacity="0.35"/>
            </svg>
          </div>
        </div>

        <h2 class="waiting-title">We're building your website...</h2>
        <p class="waiting-subtitle">Give us a few minutes. We'll notify you when it's ready.</p>
        <p class="waiting-contact" id="waiting-contact"></p>

        <div class="waiting-status">
          <span class="status-dot"></span>
          <span>Build in progress</span>
          <span class="loading-dots"><span></span><span></span><span></span></span>
        </div>
      </div>
    </div>

  </div>

  <!-- ==========================================
       Screen: Privacy Policy
       ========================================== -->
  <div id="screen-privacy" class="screen screen-legal">
    <div class="legal-container">
      <button class="legal-back" onclick="navigateToLegal(null)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Back to home
      </button>
      <h2>Privacy Policy</h2>
      <p class="legal-updated">Last updated: February 15, 2026</p>

      <h3>1. Introduction</h3>
      <p>Megabyte LLC ("we," "us," or "our") operates Project Sites (sites.megabyte.space). This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our service.</p>

      <h3>2. Information We Collect</h3>
      <p>We collect information you provide directly to us:</p>
      <ul>
        <li><strong>Account Information:</strong> Email address when you sign in via magic link or Google OAuth.</li>
        <li><strong>Business Information:</strong> Business name, address, and other details you provide for website generation.</li>
        <li><strong>Uploaded Content:</strong> Logos, photos, documents, and other files you upload.</li>
        <li><strong>Usage Data:</strong> Pages viewed, features used, and interactions with the service.</li>
      </ul>

      <h3>3. How We Use Your Information</h3>
      <ul>
        <li>Generate and host your website</li>
        <li>Authenticate your identity and manage your account</li>
        <li>Process payments and manage subscriptions</li>
        <li>Send transactional emails (sign-in links, build notifications)</li>
        <li>Improve our service through anonymized analytics</li>
        <li>Respond to support requests</li>
      </ul>

      <h3>4. Information Sharing</h3>
      <p>We do not sell your personal information. We may share information with:</p>
      <ul>
        <li><strong>Service Providers:</strong> Cloudflare (hosting), Stripe (payments), Resend/SendGrid (email delivery), PostHog (analytics), Google (business search).</li>
        <li><strong>Legal Requirements:</strong> When required by law, subpoena, or legal process.</li>
        <li><strong>Business Transfers:</strong> In connection with a merger, acquisition, or sale of assets.</li>
      </ul>

      <h3>5. Data Storage and Security</h3>
      <p>Your data is stored on Cloudflare's global network using D1 (database), R2 (file storage), and KV (caching). We use encryption in transit (TLS) and at rest. Session tokens are hashed using SHA-256 before storage.</p>

      <h3>6. Your Rights</h3>
      <p>You may request to:</p>
      <ul>
        <li>Access, correct, or delete your personal data</li>
        <li>Export your data in a portable format</li>
        <li>Opt out of analytics tracking</li>
        <li>Delete your account and all associated data</li>
      </ul>
      <p>Contact us at <a href="mailto:privacy@megabyte.space">privacy@megabyte.space</a> to exercise these rights.</p>

      <h3>7. Cookies and Tracking</h3>
      <p>We use session tokens stored in your browser's sessionStorage (not cookies) for authentication. PostHog analytics collects anonymized usage data. You can opt out by enabling Do Not Track in your browser.</p>

      <h3>8. Location Data</h3>
      <p>We may request your browser's geolocation to provide distance-based search results. This data is used only during your session and is never stored on our servers.</p>

      <h3>9. Children's Privacy</h3>
      <p>Our service is not intended for children under 13. We do not knowingly collect information from children under 13.</p>

      <h3>10. Changes to This Policy</h3>
      <p>We may update this policy from time to time. We will notify you of material changes by posting the updated policy on this page with a new "Last updated" date.</p>

      <h3>11. Contact Us</h3>
      <p>Megabyte LLC<br>63 James Street, Morristown, NJ 07960<br>Email: <a href="mailto:privacy@megabyte.space">privacy@megabyte.space</a></p>
    </div>
  </div>

  <!-- ==========================================
       Screen: Terms of Service
       ========================================== -->
  <div id="screen-terms" class="screen screen-legal">
    <div class="legal-container">
      <button class="legal-back" onclick="navigateToLegal(null)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Back to home
      </button>
      <h2>Terms of Service</h2>
      <p class="legal-updated">Last updated: February 15, 2026</p>

      <h3>1. Acceptance of Terms</h3>
      <p>By accessing or using Project Sites (sites.megabyte.space), operated by Megabyte LLC, you agree to be bound by these Terms of Service. If you do not agree, do not use the service.</p>

      <h3>2. Description of Service</h3>
      <p>Project Sites is an AI-powered website generation and hosting platform. We use artificial intelligence to create professional websites for small businesses based on business information you provide.</p>

      <h3>3. Account Registration</h3>
      <ul>
        <li>You must provide a valid email address to create an account.</li>
        <li>You are responsible for maintaining the security of your account credentials.</li>
        <li>You must be at least 18 years old or have parental consent to use the service.</li>
        <li>One person or entity may not maintain more than one free account.</li>
      </ul>

      <h3>4. Free and Paid Plans</h3>
      <ul>
        <li><strong>Free Plan:</strong> Includes AI-generated website with a Project Sites promotional bar. Hosted on a subdomain (slug-sites.megabyte.space).</li>
        <li><strong>Paid Plan ($50/month or $480/year):</strong> Removes promotional bar, enables custom domains, priority support, and advanced features.</li>
        <li>Payments are processed by Stripe. Subscriptions renew automatically unless cancelled.</li>
        <li>Refunds are available within 14 days of initial purchase if you are not satisfied.</li>
      </ul>

      <h3>5. Acceptable Use</h3>
      <p>You agree not to use the service to:</p>
      <ul>
        <li>Violate any applicable laws or regulations</li>
        <li>Host malicious content, malware, or phishing pages</li>
        <li>Infringe on intellectual property rights of others</li>
        <li>Distribute spam or unsolicited communications</li>
        <li>Impersonate another person or entity</li>
        <li>Attempt to circumvent rate limits, security measures, or access controls</li>
        <li>Host content that promotes violence, discrimination, or illegal activities</li>
      </ul>

      <h3>6. Content Ownership</h3>
      <ul>
        <li>You retain ownership of content you upload (logos, photos, text).</li>
        <li>AI-generated website code and design are licensed to you for use with the service.</li>
        <li>You grant us a limited license to host and serve your content as part of the service.</li>
        <li>We may showcase your site (with branding removed) in marketing materials unless you opt out.</li>
      </ul>

      <h3>7. Service Availability</h3>
      <p>We strive for 99.9% uptime but do not guarantee uninterrupted service. We are not liable for downtime due to maintenance, infrastructure issues, or circumstances beyond our control.</p>

      <h3>8. Termination</h3>
      <ul>
        <li>You may delete your account at any time by contacting support.</li>
        <li>We may suspend or terminate accounts that violate these terms.</li>
        <li>Upon termination, your site will be taken offline and data deleted within 30 days.</li>
      </ul>

      <h3>9. Limitation of Liability</h3>
      <p>To the maximum extent permitted by law, Megabyte LLC shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the service. Our total liability shall not exceed the amount you paid us in the 12 months preceding the claim.</p>

      <h3>10. Governing Law</h3>
      <p>These terms are governed by the laws of the State of New Jersey, United States. Any disputes shall be resolved in the courts of Morris County, New Jersey.</p>

      <h3>11. Changes to Terms</h3>
      <p>We may modify these terms at any time. Continued use after changes constitutes acceptance of the new terms.</p>

      <h3>12. Contact</h3>
      <p>Megabyte LLC<br>63 James Street, Morristown, NJ 07960<br>Email: <a href="mailto:legal@megabyte.space">legal@megabyte.space</a></p>
    </div>
  </div>

  <!-- ==========================================
       Screen: Content Policy
       ========================================== -->
  <div id="screen-content" class="screen screen-legal">
    <div class="legal-container">
      <button class="legal-back" onclick="navigateToLegal(null)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Back to home
      </button>
      <h2>Content Policy</h2>
      <p class="legal-updated">Last updated: February 15, 2026</p>

      <h3>1. Overview</h3>
      <p>This Content Policy outlines what content is and is not allowed on websites generated and hosted by Project Sites. We reserve the right to remove content or suspend accounts that violate this policy.</p>

      <h3>2. Prohibited Content</h3>
      <p>The following content is not allowed on any Project Sites-hosted website:</p>
      <ul>
        <li><strong>Illegal Content:</strong> Anything that violates local, state, federal, or international law.</li>
        <li><strong>Harmful Content:</strong> Content that promotes violence, self-harm, terrorism, or extremism.</li>
        <li><strong>Hate Speech:</strong> Content that attacks individuals or groups based on race, ethnicity, religion, gender, sexual orientation, disability, or national origin.</li>
        <li><strong>Adult Content:</strong> Explicit sexual content or pornography.</li>
        <li><strong>Fraud and Deception:</strong> Phishing, scam websites, counterfeit goods, or misleading health/financial claims.</li>
        <li><strong>Malware:</strong> Code designed to harm, exploit, or gain unauthorized access to systems.</li>
        <li><strong>Intellectual Property Violations:</strong> Content that infringes on copyrights, trademarks, or other IP rights.</li>
        <li><strong>Privacy Violations:</strong> Doxxing, non-consensual intimate imagery, or unauthorized disclosure of personal information.</li>
        <li><strong>Spam:</strong> Deceptive SEO, link farms, or auto-generated content designed to manipulate search rankings.</li>
      </ul>

      <h3>3. AI-Generated Content Guidelines</h3>
      <p>Websites generated by our AI must:</p>
      <ul>
        <li>Accurately represent the business or entity they describe</li>
        <li>Not contain fabricated reviews, testimonials, or credentials</li>
        <li>Include factual information based on publicly available data</li>
        <li>Clearly indicate AI involvement if required by applicable regulations</li>
      </ul>

      <h3>4. User-Uploaded Content</h3>
      <p>When uploading logos, photos, or documents:</p>
      <ul>
        <li>You must have the right to use all uploaded content</li>
        <li>Images must not contain prohibited content as described above</li>
        <li>File uploads are scanned for malware and inappropriate content</li>
        <li>Maximum file size: 10MB per file, 5 files per submission</li>
      </ul>

      <h3>5. Reporting Violations</h3>
      <p>If you encounter content that violates this policy, please report it to <a href="mailto:abuse@megabyte.space">abuse@megabyte.space</a> with:</p>
      <ul>
        <li>The URL of the offending website</li>
        <li>A description of the violation</li>
        <li>Any supporting evidence</li>
      </ul>

      <h3>6. Enforcement</h3>
      <ul>
        <li><strong>First Violation:</strong> Warning and request to remove offending content within 48 hours.</li>
        <li><strong>Second Violation:</strong> Temporary suspension of the site (7 days).</li>
        <li><strong>Severe or Repeated Violations:</strong> Permanent account termination and content removal.</li>
        <li><strong>Illegal Content:</strong> Immediate removal and report to appropriate authorities.</li>
      </ul>

      <h3>7. Appeals</h3>
      <p>If you believe your content was removed in error, contact <a href="mailto:appeals@megabyte.space">appeals@megabyte.space</a>. We will review appeals within 5 business days.</p>

      <h3>8. Contact</h3>
      <p>Megabyte LLC<br>63 James Street, Morristown, NJ 07960<br>Email: <a href="mailto:abuse@megabyte.space">abuse@megabyte.space</a></p>
    </div>
  </div>

  <!-- ==========================================
       Screen: Contact Form
       ========================================== -->
  <div id="screen-contact" class="screen screen-legal">
    <div class="legal-container">
      <button class="legal-back" onclick="navigateToLegal(null)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Back to home
      </button>
      <h2>Contact Us</h2>
      <p style="color:var(--text-secondary);margin-bottom:32px;">Have a question, feedback, or need help? We'd love to hear from you.</p>

      <form id="contact-form" onsubmit="event.preventDefault();submitContactForm();" novalidate>
        <div class="input-group">
          <label for="contact-name">Name <span style="color:var(--accent);">*</span></label>
          <input type="text" id="contact-name" class="input-field" placeholder="Your full name" maxlength="200" required />
        </div>
        <div class="input-group">
          <label for="contact-email">Email <span style="color:var(--accent);">*</span></label>
          <input type="email" id="contact-email" class="input-field" placeholder="you@example.com" maxlength="254" required />
        </div>
        <div class="input-group">
          <label for="contact-phone">Phone <span style="color:var(--text-muted);">(optional)</span></label>
          <input type="tel" id="contact-phone" class="input-field" placeholder="+1 (555) 123-4567" maxlength="20" />
        </div>
        <div class="input-group">
          <label for="contact-message">Message <span style="color:var(--accent);">*</span></label>
          <textarea id="contact-message" class="input-field" placeholder="How can we help you?" maxlength="5000" required style="min-height:150px;"></textarea>
        </div>
        <button class="btn btn-accent btn-large btn-full" id="contact-submit-btn" type="submit">
          Send Message
        </button>
        <div id="contact-msg" class="msg"></div>
      </form>
    </div>
  </div>

  <!-- Location Permission Modal -->
  <div id="location-modal" class="location-modal-overlay" style="display:none;">
    <div class="location-modal">
      <div class="location-modal-icon">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
        </svg>
      </div>
      <h3>Enable location for better results?</h3>
      <p>We can show businesses near you and sort results by distance. Your location is never stored or shared.</p>
      <div class="location-modal-actions">
        <button class="btn-skip" onclick="dismissLocationModal()">Skip</button>
        <button class="btn-allow" onclick="allowLocation()">Allow</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-links">
        <a href="/privacy" onclick="event.preventDefault();navigateToLegal('privacy')">Privacy Policy</a>
        <a href="/terms" onclick="event.preventDefault();navigateToLegal('terms')">Terms of Service</a>
        <a href="/content" onclick="event.preventDefault();navigateToLegal('content')">Content Policy</a>
        <a href="mailto:support@megabyte.space">Support</a>
        <a href="/contact" onclick="event.preventDefault();navigateToLegal('contact')">Contact</a>
      </div>
      <div class="footer-social">
        <!-- GitHub -->
        <a href="https://github.com/HeyMegabyte" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
        </a>
        <!-- X / Twitter -->
        <a href="https://x.com/HeyMegabyte" target="_blank" rel="noopener noreferrer" aria-label="X">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
        <!-- LinkedIn -->
        <a href="https://www.linkedin.com/in/blzalewski" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </a>
        <!-- YouTube -->
        <a href="https://www.youtube.com/@HeyMegabyte" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
        </a>
        <!-- Instagram -->
        <a href="https://www.instagram.com/heymegabyteofficial/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
        </a>
        <!-- Facebook -->
        <a href="https://www.facebook.com/HeyMegabyte" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
        </a>
      </div>
      <div class="footer-bottom">
        <span>&copy; 2026 Megabyte LLC</span>
        <span>Powered by <a href="https://megabyte.space" target="_blank" rel="noopener noreferrer">Megabyte Labs</a></span>
      </div>
    </div>
  </footer>

  <!-- Uppy -->
  <script src="https://releases.transloadit.com/uppy/v4.12.1/uppy.min.js"></script>

  <script>
    /* ===========================================================
       State Machine
       =========================================================== */
    var state = {
      screen: 'search',
      searchQuery: '',
      searchResults: [],
      preBuiltResults: [],
      selectedBusiness: null,
      mode: 'business',      // 'business' | 'custom'
      session: null,          // { token, identifier }
      siteId: null,
      slug: null,
      signinPanel: 'main',   // 'main' | 'email'
      userLat: null,
      userLng: null
    };

    // Request browser geolocation with custom modal
    // Only show if: (1) geolocation is supported, (2) user hasn't declined before,
    // (3) location isn't already available
    function dismissLocationModal() {
      document.getElementById('location-modal').style.display = 'none';
      try { localStorage.setItem('ps_location_declined', '1'); } catch(e) { /* private browsing */ }
    }
    function allowLocation() {
      document.getElementById('location-modal').style.display = 'none';
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            state.userLat = pos.coords.latitude;
            state.userLng = pos.coords.longitude;
          },
          function() { /* user denied or unavailable - that's fine */ },
          { timeout: 5000, maximumAge: 300000 }
        );
      }
    }
    if (navigator.geolocation && !state.userLat) {
      var declined = false;
      try { declined = localStorage.getItem('ps_location_declined') === '1'; } catch(e) { /* private browsing */ }
      if (!declined) {
        setTimeout(function() {
          // Re-check: location may have been set by the time the timeout fires
          if (!state.userLat) {
            document.getElementById('location-modal').style.display = 'flex';
          }
        }, 5000);
      }
    }

    var searchDebounceTimer = null;
    var pollTimer = null;
    var uppyInstance = null;

    /** Redirect helper - stubbable in E2E tests */
    function redirectTo(url) {
      window.location.href = url;
    }

    /* ===========================================================
       Screen Navigation
       =========================================================== */
    function navigateTo(screen) {
      state.screen = screen;
      render();

      if (typeof posthog !== 'undefined' && posthog.capture) {
        posthog.capture('screen_view', { screen: screen });
      }
    }

    function render() {
      var screens = document.querySelectorAll('.screen');
      for (var i = 0; i < screens.length; i++) {
        screens[i].classList.remove('active');
      }
      var target = document.getElementById('screen-' + state.screen);
      if (target) {
        target.classList.add('active');
      }

      // Initialize Uppy when details screen is shown
      if (state.screen === 'details' && !uppyInstance) {
        initUppy();
      }

      // Start polling when on waiting screen
      if (state.screen === 'waiting') {
        startPolling();
      } else {
        stopPolling();
      }
    }

    /* ===========================================================
       Legal Page Navigation (SPA routing)
       =========================================================== */
    var _prevScreen = 'search';
    function navigateToLegal(page) {
      if (page) {
        _prevScreen = state.screen;
        navigateTo(page);
        window.history.pushState({ legal: page }, '', '/' + page);
        window.scrollTo(0, 0);
      } else {
        navigateTo(_prevScreen || 'search');
        window.history.pushState({}, '', '/');
        window.scrollTo(0, 0);
      }
    }

    // Handle browser back/forward for legal pages
    window.addEventListener('popstate', function(e) {
      if (e.state && e.state.legal) {
        state.screen = e.state.legal;
        render();
      } else {
        var path = window.location.pathname;
        if (path === '/privacy' || path === '/terms' || path === '/content' || path === '/contact') {
          state.screen = path.slice(1);
          render();
        } else {
          state.screen = _prevScreen || 'search';
          render();
        }
      }
    });

    // Deep-link: if URL is /privacy, /terms, /content, or /contact on page load
    (function handleLegalDeepLink() {
      var path = window.location.pathname;
      if (path === '/privacy' || path === '/terms' || path === '/content' || path === '/contact') {
        state.screen = path.slice(1);
        render();
      }
    })();

    /* ===========================================================
       Search Logic
       =========================================================== */
    var searchInput = document.getElementById('search-input');
    var searchDropdown = document.getElementById('search-dropdown');
    var searchSpinner = document.getElementById('search-spinner');

    searchInput.addEventListener('input', function() {
      var query = searchInput.value.trim();
      state.searchQuery = query;

      clearTimeout(searchDebounceTimer);
      hideMsg('search-error');

      if (query.length < 2) {
        searchSpinner.classList.remove('visible');
        closeDropdown();
        return;
      }

      searchSpinner.classList.add('visible');

      searchDebounceTimer = setTimeout(function() {
        performSearch(query);
      }, 300);
    });

    searchInput.addEventListener('focus', function() {
      if (state.searchResults.length > 0 || state.preBuiltResults.length > 0 || state.searchQuery.length >= 2) {
        renderDropdown();
      }
    });

    // Close dropdown on click outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.search-wrapper')) {
        closeDropdown();
      }
    });

    function performSearch(query) {
      // Build search URL with optional geolocation for local-biased results
      var searchUrl = '/api/search/businesses?q=' + encodeURIComponent(query);
      if (state.userLat !== null && state.userLng !== null) {
        searchUrl += '&lat=' + state.userLat + '&lng=' + state.userLng;
      }

      // Search both pre-built sites and Google Places in parallel
      var sitesPromise = fetch('/api/sites/search?q=' + encodeURIComponent(query))
        .then(function(res) { return res.ok ? res.json() : { data: [] }; })
        .then(function(d) { return d.data || []; })
        .catch(function() { return []; });

      var placesPromise = fetch(searchUrl)
        .then(function(res) { return res.json(); })
        .then(function(d) {
          // Surface API errors to the user
          if (d._error) {
            console.warn('Search API error:', d._error);
          }
          return d.data || [];
        })
        .catch(function() { return []; });

      Promise.all([sitesPromise, placesPromise])
        .then(function(results) {
          // Guard: if query changed while fetching, discard stale results
          if (state.searchQuery.trim().length < 2) {
            searchSpinner.classList.remove('visible');
            closeDropdown();
            return;
          }
          searchSpinner.classList.remove('visible');
          state.preBuiltResults = Array.isArray(results[0]) ? results[0] : [];
          state.searchResults = Array.isArray(results[1]) ? results[1] : [];
          renderDropdown();
        })
        .catch(function() {
          searchSpinner.classList.remove('visible');
          state.preBuiltResults = [];
          state.searchResults = [];
          renderDropdown();
        });
    }

    /** Calculate distance in km between two lat/lng points using Haversine formula. */
    function haversineKm(lat1, lng1, lat2, lng2) {
      var R = 6371;
      var dLat = (lat2 - lat1) * Math.PI / 180;
      var dLng = (lng2 - lng1) * Math.PI / 180;
      var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
              Math.sin(dLng / 2) * Math.sin(dLng / 2);
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    }

    /** Format distance for display. */
    function formatDistance(km) {
      var miles = km * 0.621371;
      if (miles < 0.1) return '< 0.1 mi';
      if (miles < 10) return miles.toFixed(1) + ' mi';
      return Math.round(miles) + ' mi';
    }

    function renderDropdown() {
      var html = '';
      var preBuilt = state.preBuiltResults || [];

      // Sort Google Places results by distance when location is available
      var results = state.searchResults || [];
      if (state.userLat !== null && state.userLng !== null && results.length > 0) {
        results = results.slice().sort(function(a, b) {
          var distA = (a.lat != null && a.lng != null)
            ? haversineKm(state.userLat, state.userLng, a.lat, a.lng)
            : Infinity;
          var distB = (b.lat != null && b.lng != null)
            ? haversineKm(state.userLat, state.userLng, b.lat, b.lng)
            : Infinity;
          return distA - distB;
        });
        // Attach distance for display
        for (var k = 0; k < results.length; k++) {
          if (results[k].lat != null && results[k].lng != null) {
            results[k]._distance = haversineKm(state.userLat, state.userLng, results[k].lat, results[k].lng);
          }
        }
      }

      // Pre-built sites first (already generated)
      for (var j = 0; j < preBuilt.length; j++) {
        var pb = preBuilt[j];
        html += '<div class="search-result search-result-prebuilt" onclick="selectPreBuilt(' + j + ')">'
              +   '<div class="search-result-icon" style="background:rgba(34,197,94,0.12)">'
              +     '<svg viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'
              +       '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>'
              +     '</svg>'
              +   '</div>'
              +   '<div class="search-result-text">'
              +     '<div class="search-result-name">' + escapeHtml(pb.business_name || pb.name || '') + ' <span style="display:inline-block;background:rgba(34,197,94,0.15);color:#22c55e;font-size:0.7rem;font-weight:700;padding:2px 6px;border-radius:4px;margin-left:6px;vertical-align:middle;letter-spacing:0.03em">PRE-BUILT</span></div>'
              +     '<div class="search-result-address">' + escapeHtml(pb.business_address || pb.address || 'Ready to view') + '</div>'
              +   '</div>'
              + '</div>';
      }

      // Google Places results (sorted by distance when location available)
      // Update state.searchResults to match sorted order so selectBusiness(index) works
      state.searchResults = results;
      for (var i = 0; i < results.length; i++) {
        var r = results[i];
        var distLabel = (r._distance != null) ? ' <span style="color:var(--text-muted);font-size:0.75rem;margin-left:6px">' + formatDistance(r._distance) + '</span>' : '';
        html += '<div class="search-result" onclick="selectBusiness(' + i + ')">'
              +   '<div class="search-result-icon">'
              +     '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'
              +       '<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>'
              +     '</svg>'
              +   '</div>'
              +   '<div class="search-result-text">'
              +     '<div class="search-result-name">' + escapeHtml(r.name || r.business_name || '') + distLabel + '</div>'
              +     '<div class="search-result-address">' + escapeHtml(r.address || r.formatted_address || r.street_address || '') + '</div>'
              +   '</div>'
              + '</div>';
      }

      // Custom website option (always shown)
      html += '<div class="search-result search-result-custom" onclick="selectCustom()">'
            +   '<div class="search-result-icon">'
            +     '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'
            +       '<path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/>'
            +     '</svg>'
            +   '</div>'
            +   '<div class="search-result-text">'
            +     '<div class="search-result-name">Custom Website</div>'
            +     '<div class="search-result-address">Build a custom website from scratch</div>'
            +   '</div>'
            + '</div>';

      searchDropdown.innerHTML = html;
      searchDropdown.classList.add('open');
    }

    function closeDropdown() {
      searchDropdown.classList.remove('open');
    }

    /* ===========================================================
       Business Selection
       =========================================================== */
    function selectBusiness(index) {
      var biz = state.searchResults[index];
      state.selectedBusiness = biz;
      state.mode = 'business';
      closeDropdown();

      if (typeof posthog !== 'undefined' && posthog.capture) {
        posthog.capture('business_selected', { name: biz.name || biz.business_name });
      }

      // Check if a site already exists
      var placeId = biz.place_id || biz.id || '';
      if (!placeId) {
        // No place_id - go directly to details (sign-in deferred to build)
        navigateTo('details');
        return;
      }

      showInlineLoading('search-error', 'Checking if a site exists...');

      fetch('/api/sites/lookup?place_id=' + encodeURIComponent(placeId))
        .then(function(res) {
          if (res.status === 404) return null;
          if (!res.ok) throw new Error('Lookup failed');
          return res.json();
        })
        .then(function(json) {
          hideMsg('search-error');
          var site = json && json.data ? json.data : json;
          if (!site || site.exists === false) {
            // No existing site -> go to details (sign-in deferred)
            navigateTo('details');
            return;
          }

          state.siteId = site.id || site.site_id;
          state.slug = site.slug;

          if (site.status === 'published' && site.slug) {
            // Redirect to the live site
            redirectTo('https://' + site.slug + '-sites.megabyte.space');
          } else if (site.status === 'queued' || site.status === 'building') {
            navigateTo('waiting');
          } else {
            // Draft or other - go to details
            navigateTo('details');
          }
        })
        .catch(function(err) {
          hideMsg('search-error');
          // On error, just proceed to details
          navigateTo('details');
        });
    }

    function selectPreBuilt(index) {
      var site = state.preBuiltResults[index];
      closeDropdown();

      if (typeof posthog !== 'undefined' && posthog.capture) {
        posthog.capture('prebuilt_site_selected', { slug: site.slug, name: site.business_name });
      }

      // Redirect to the live site if published, or show waiting screen
      if (site.status === 'published' && site.slug) {
        redirectTo('https://' + site.slug + '-sites.megabyte.space');
      } else if (site.status === 'queued' || site.status === 'building') {
        state.siteId = site.id || site.site_id;
        state.slug = site.slug;
        navigateTo('waiting');
      } else {
        // Draft or other status - treat as new business selection
        state.selectedBusiness = {
          name: site.business_name,
          address: site.business_address || '',
          place_id: site.google_place_id || ''
        };
        state.mode = 'business';
        navigateTo('signin');
      }
    }

    function selectCustom() {
      state.selectedBusiness = null;
      state.mode = 'custom';
      closeDropdown();

      if (typeof posthog !== 'undefined' && posthog.capture) {
        posthog.capture('custom_website_selected');
      }

      // Go directly to details - sign-in deferred to build
      navigateTo('details');
    }

    /* ===========================================================
       Sign-In Logic
       =========================================================== */
    function showSigninPanel(panel) {
      state.signinPanel = panel;

      var methodsEl = document.getElementById('signin-methods');
      var emailPanel = document.getElementById('signin-email-panel');
      var backToSearch = document.getElementById('signin-back-to-search');

      methodsEl.style.display = 'none';
      emailPanel.classList.remove('active');

      if (panel === 'main') {
        methodsEl.style.display = 'flex';
        backToSearch.style.display = '';
      } else if (panel === 'email') {
        emailPanel.classList.add('active');
        backToSearch.style.display = 'none';
        // Reset to fresh input state so "Check your email" message is cleared
        document.getElementById('email-step-input').style.display = '';
        document.getElementById('email-step-sent').style.display = 'none';
        hideMsg('email-send-msg');
        document.getElementById('email-input').focus();
      }
    }

    // Reset panels whenever we navigate to signin
    var origNavigateTo = navigateTo;
    navigateTo = function(screen) {
      if (screen === 'signin') {
        setTimeout(function() { showSigninPanel('main'); }, 10);
      }
      if (screen === 'details') {
        updateDetailsScreen();
        // If we have a session and a pending build, auto-submit
        if (state._pendingBuild && state.session && state.session.token) {
          state._pendingBuild = false;
          setTimeout(function() { submitBuild(); }, 100);
        }
      }
      if (screen === 'waiting') {
        updateWaitingScreen();
      }
      origNavigateTo(screen);
    };

    function signInWithGoogle() {
      if (typeof posthog !== 'undefined' && posthog.capture) {
        posthog.capture('signin_google_clicked');
      }

      var redirectUrl = window.location.origin + window.location.pathname + '?auth_callback=google';
      redirectTo('/api/auth/google?redirect_url=' + encodeURIComponent(redirectUrl));
    }

    /** Extract a human-readable error message from an API error response. */
    function extractErrorMsg(d, fallback) {
      if (!d) return fallback;
      if (typeof d === 'string') return d;
      if (typeof d.message === 'string') return d.message;
      if (d.error && typeof d.error === 'string') return d.error;
      if (d.error && typeof d.error.message === 'string') return d.error.message;
      return fallback;
    }

    function sendMagicLink() {
      var email = document.getElementById('email-input').value.trim().toLowerCase();
      var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        showMsg('email-send-msg', 'error', 'Please enter a valid email address.');
        return;
      }
      if (email.length > 254) {
        showMsg('email-send-msg', 'error', 'Email address is too long.');
        return;
      }

      var btn = document.getElementById('email-send-btn');
      btn.disabled = true;
      btn.innerHTML = 'Sending <span class="loading-dots"><span></span><span></span><span></span></span>';
      hideMsg('email-send-msg');

      fetch('/api/auth/magic-link', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: email })
      })
        .then(function(res) {
          if (!res.ok) return res.json().then(function(d) { throw new Error(extractErrorMsg(d, 'Failed to send link')); });
          return res.json();
        })
        .then(function(data) {
          btn.disabled = false;
          btn.textContent = 'Send Magic Link';
          // Hide the input form and show the success message
          document.getElementById('email-step-input').style.display = 'none';
          document.getElementById('email-step-sent').style.display = 'block';

          // Store session for optimistic flow (real auth comes via redirect)
          state.session = {
            token: data.token || '',
            identifier: email
          };

          if (typeof posthog !== 'undefined' && posthog.capture) {
            posthog.capture('signin_email_sent', { email: email });
          }
        })
        .catch(function(err) {
          btn.disabled = false;
          btn.textContent = 'Send Magic Link';
          showMsg('email-send-msg', 'error', err.message || 'Failed to send magic link. Please try again.');
        });
    }

    /* ===========================================================
       Details Screen
       =========================================================== */
    function updateDetailsScreen() {
      var titleEl = document.getElementById('details-title');
      var subtitleEl = document.getElementById('details-subtitle');
      var badgeEl = document.getElementById('details-business-badge');
      var manualFields = document.getElementById('details-manual-fields');

      if (state.mode === 'custom') {
        titleEl.textContent = 'Describe your custom website';
        subtitleEl.textContent = 'Tell us what you\'d like and we\'ll build it for you.';
        badgeEl.style.display = 'none';
        manualFields.style.display = 'block';
      } else {
        titleEl.textContent = 'Tell us more about your business';
        subtitleEl.textContent = 'Include everything important for your website. We\'ll also search the web for public info about your business.';

        if (state.selectedBusiness) {
          var biz = state.selectedBusiness;
          document.getElementById('badge-biz-name').textContent = biz.name || biz.business_name || 'Selected Business';
          document.getElementById('badge-biz-addr').textContent = biz.address || biz.formatted_address || biz.street_address || '';
          badgeEl.style.display = 'flex';
          manualFields.style.display = 'none';
        } else {
          badgeEl.style.display = 'none';
          manualFields.style.display = 'block';
        }
      }
    }

    function initUppy() {
      if (typeof Uppy === 'undefined') {
        setTimeout(initUppy, 200);
        return;
      }

      var dashboardTarget = document.getElementById('uppy-dashboard-area');
      if (!dashboardTarget) return;

      uppyInstance = new Uppy.Uppy({
        restrictions: {
          maxFileSize: 10 * 1024 * 1024,
          maxNumberOfFiles: 5,
          allowedFileTypes: ['.jpg', '.jpeg', '.png', '.svg', '.webp', '.pdf']
        },
        autoProceed: false
      });

      uppyInstance.use(Uppy.Dashboard, {
        target: '#uppy-dashboard-area',
        inline: true,
        width: '100%',
        height: 220,
        hideUploadButton: true,
        proudlyDisplayPoweredByUppy: false,
        theme: 'dark',
        note: 'Images (JPG, PNG, SVG, WebP) and PDFs. Max 10MB each, up to 5 files.'
      });
    }

    function submitBuild() {
      // If not signed in, require sign-in first, then auto-build after callback
      if (!state.session || !state.session.token) {
        state._pendingBuild = true;
        navigateTo('signin');
        return;
      }

      var rawContext = document.getElementById('details-textarea').value.trim();
      // Client-side sanitization: strip HTML tags and limit length
      var additionalContext = rawContext.replace(/<[^>]*>/g, '').slice(0, 5000);
      var btn = document.getElementById('build-btn');

      // Validate additional context doesn't contain script injection
      if (/<script/i.test(rawContext) || /javascript:/i.test(rawContext)) {
        showMsg('build-msg', 'error', 'Invalid characters detected in your input. Please remove any HTML or script tags.');
        return;
      }

      btn.disabled = true;
      btn.innerHTML = 'Building <span class="loading-dots"><span></span><span></span><span></span></span>';
      hideMsg('build-msg');

      var payload = {
        mode: state.mode,
        additional_context: additionalContext
      };

      if (state.selectedBusiness) {
        payload.business = {
          name: state.selectedBusiness.name || state.selectedBusiness.business_name,
          address: state.selectedBusiness.address || state.selectedBusiness.formatted_address || state.selectedBusiness.street_address,
          place_id: state.selectedBusiness.place_id || state.selectedBusiness.id,
          phone: state.selectedBusiness.phone || state.selectedBusiness.phone_number,
          website: state.selectedBusiness.website,
          types: state.selectedBusiness.types
        };
      } else {
        var manualName = document.getElementById('business-name-input').value.trim();
        var manualAddr = document.getElementById('business-address-input').value.trim();
        if (manualName) {
          payload.business = { name: manualName, address: manualAddr || undefined };
        }
      }

      var headers = { 'Content-Type': 'application/json' };
      if (state.session && state.session.token) {
        headers['Authorization'] = 'Bearer ' + state.session.token;
      }

      fetch('/api/sites/create-from-search', {
        method: 'POST',
        headers: headers,
        body: JSON.stringify(payload)
      })
        .then(function(res) {
          if (!res.ok) return res.json().then(function(d) { throw new Error((d.error && d.error.message) || d.error || 'Failed to create site'); });
          return res.json();
        })
        .then(function(data) {
          btn.disabled = false;
          btn.textContent = 'Build My Website';
          state.siteId = data.id || data.site_id;
          state.slug = data.slug;

          if (typeof posthog !== 'undefined' && posthog.capture) {
            posthog.capture('site_build_started', { mode: state.mode, site_id: state.siteId });
          }

          // Upload files if any
          if (uppyInstance && uppyInstance.getFiles().length > 0 && state.siteId) {
            uppyInstance.use(Uppy.XHRUpload, {
              endpoint: '/api/sites/' + state.siteId + '/uploads',
              headers: headers,
              fieldName: 'file',
              formData: true
            });
            uppyInstance.upload().then(function() {
              navigateTo('waiting');
            }).catch(function() {
              // Even if upload fails, proceed to waiting
              navigateTo('waiting');
            });
          } else {
            navigateTo('waiting');
          }
        })
        .catch(function(err) {
          btn.disabled = false;
          btn.textContent = 'Build My Website';
          showMsg('build-msg', 'error', err.message || 'Something went wrong. Please try again.');
        });
    }

    /* ===========================================================
       Waiting Screen
       =========================================================== */
    function updateWaitingScreen() {
      var contactEl = document.getElementById('waiting-contact');
      if (state.session && state.session.identifier) {
        contactEl.textContent = 'Signed in as ' + state.session.identifier;
      } else {
        contactEl.textContent = '';
      }
    }

    function startPolling() {
      stopPolling();
      if (!state.siteId) return;

      pollTimer = setInterval(function() {
        var headers = {};
        if (state.session && state.session.token) {
          headers['Authorization'] = 'Bearer ' + state.session.token;
        }

        fetch('/api/sites/' + state.siteId, { headers: headers })
          .then(function(res) {
            if (!res.ok) return null;
            return res.json();
          })
          .then(function(site) {
            if (!site) return;
            if (site.status === 'published' && (site.slug || state.slug)) {
              stopPolling();
              var slug = site.slug || state.slug;
              redirectTo('https://' + slug + '-sites.megabyte.space');
            }
          })
          .catch(function() {
            // Silently continue polling
          });
      }, 10000);
    }

    function stopPolling() {
      if (pollTimer) {
        clearInterval(pollTimer);
        pollTimer = null;
      }
    }

    /* ===========================================================
       Message Helpers
       =========================================================== */
    function showMsg(id, type, text) {
      var el = document.getElementById(id);
      if (!el) return;
      el.className = 'msg msg-' + type + ' visible';
      el.textContent = text;
    }

    function hideMsg(id) {
      var el = document.getElementById(id);
      if (!el) return;
      el.classList.remove('visible');
    }

    function showInlineLoading(id, text) {
      var el = document.getElementById(id);
      if (!el) return;
      el.className = 'msg msg-info visible';
      el.innerHTML = text + ' <span class="loading-dots"><span></span><span></span><span></span></span>';
    }

    /* ===========================================================
       Utilities
       =========================================================== */
    function escapeHtml(str) {
      if (!str) return '';
      var div = document.createElement('div');
      div.appendChild(document.createTextNode(str));
      return div.innerHTML;
    }

    /* ===========================================================
       Handle Auth Callback
       =========================================================== */
    (function handleAuthCallback() {
      var params = new URLSearchParams(window.location.search);

      if (params.has('auth_callback') || params.has('token') || params.has('access_token')) {
        var token = params.get('token') || params.get('access_token') || '';
        var email = params.get('email') || '';
        var phone = params.get('phone') || '';

        if (token) {
          state.session = {
            token: token,
            identifier: email || phone || 'Authenticated'
          };

          // Clean URL
          var cleanUrl = window.location.pathname;
          window.history.replaceState({}, document.title, cleanUrl);

          // Restore any selected business from sessionStorage
          var savedBiz = sessionStorage.getItem('ps_selected_business');
          var savedMode = sessionStorage.getItem('ps_mode');
          var savedPendingBuild = sessionStorage.getItem('ps_pending_build');
          if (savedBiz) {
            try {
              state.selectedBusiness = JSON.parse(savedBiz);
              state.mode = savedMode || 'business';
            } catch (e) { /* ignore */ }
            sessionStorage.removeItem('ps_selected_business');
            sessionStorage.removeItem('ps_mode');
          }
          if (savedPendingBuild) {
            state._pendingBuild = true;
            sessionStorage.removeItem('ps_pending_build');
          }

          navigateTo('details');
        }
      }
    })();

    // Save business selection + pending build before Google redirect
    var origSignInWithGoogle = signInWithGoogle;
    signInWithGoogle = function() {
      if (state.selectedBusiness) {
        sessionStorage.setItem('ps_selected_business', JSON.stringify(state.selectedBusiness));
        sessionStorage.setItem('ps_mode', state.mode);
      }
      if (state._pendingBuild) {
        sessionStorage.setItem('ps_pending_build', '1');
      }
      origSignInWithGoogle();
    };

    /* ===========================================================
       Keyboard: Enter to select first result
       =========================================================== */
    searchInput.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeDropdown();
        searchInput.blur();
      }
    });

    /* ===========================================================
       FAQ Accordion
       =========================================================== */
    function toggleFaq(btn) {
      var item = btn.parentElement;
      var wasOpen = item.classList.contains('open');
      // Close all
      var allItems = document.querySelectorAll('.faq-item');
      for (var i = 0; i < allItems.length; i++) {
        allItems[i].classList.remove('open');
      }
      // Toggle clicked
      if (!wasOpen) {
        item.classList.add('open');
      }
    }

    /* ===========================================================
       Pricing Toggle (monthly/annual)
       =========================================================== */
    var pricingIsAnnual = false;

    function togglePricing() {
      pricingIsAnnual = !pricingIsAnnual;
      var sw = document.getElementById('toggle-switch');
      var monthlyLabel = document.getElementById('toggle-monthly');
      var annualLabel = document.getElementById('toggle-annual');
      var amount = document.getElementById('pricing-amount');
      var desc = document.getElementById('pricing-desc-text');

      if (pricingIsAnnual) {
        sw.classList.add('annual');
        monthlyLabel.classList.remove('active');
        annualLabel.classList.add('active');
        amount.innerHTML = '<span class="pricing-original">$600</span>$480<span>/yr</span>';
        desc.textContent = 'Save $120/year (2 months free). Billed annually.';
      } else {
        sw.classList.remove('annual');
        monthlyLabel.classList.add('active');
        annualLabel.classList.remove('active');
        amount.innerHTML = '$50<span>/mo</span>';
        desc.textContent = 'Everything you need to run a professional business website.';
      }
    }

    /* ===========================================================
       Contact Form
       =========================================================== */
    function submitContactForm() {
      var name = document.getElementById('contact-name').value.trim();
      var email = document.getElementById('contact-email').value.trim().toLowerCase();
      var phone = document.getElementById('contact-phone').value.trim();
      var message = document.getElementById('contact-message').value.trim();

      // Client-side validation
      if (!name || name.length < 1) {
        showMsg('contact-msg', 'error', 'Please enter your name.');
        return;
      }
      if (name.length > 200) {
        showMsg('contact-msg', 'error', 'Name is too long (max 200 characters).');
        return;
      }
      var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        showMsg('contact-msg', 'error', 'Please enter a valid email address.');
        return;
      }
      if (email.length > 254) {
        showMsg('contact-msg', 'error', 'Email address is too long.');
        return;
      }
      if (phone && phone.length > 20) {
        showMsg('contact-msg', 'error', 'Phone number is too long (max 20 characters).');
        return;
      }
      if (!message || message.length < 10) {
        showMsg('contact-msg', 'error', 'Please enter a message (at least 10 characters).');
        return;
      }
      if (message.length > 5000) {
        showMsg('contact-msg', 'error', 'Message is too long (max 5000 characters).');
        return;
      }
      if (/<script/i.test(name) || /<script/i.test(message) || /javascript:/i.test(message)) {
        showMsg('contact-msg', 'error', 'Invalid characters detected. Please remove any HTML or script tags.');
        return;
      }

      var btn = document.getElementById('contact-submit-btn');
      btn.disabled = true;
      btn.innerHTML = 'Sending <span class="loading-dots"><span></span><span></span><span></span></span>';
      hideMsg('contact-msg');

      var payload = { name: name, email: email, message: message };
      if (phone) payload.phone = phone;

      fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      })
        .then(function(res) {
          if (!res.ok) return res.json().then(function(d) { throw new Error(extractErrorMsg(d, 'Failed to send message')); });
          return res.json();
        })
        .then(function() {
          btn.disabled = false;
          btn.textContent = 'Send Message';
          showMsg('contact-msg', 'success', 'Message sent successfully! We\'ll get back to you soon.');
          document.getElementById('contact-form').reset();
        })
        .catch(function(err) {
          btn.disabled = false;
          btn.textContent = 'Send Message';
          showMsg('contact-msg', 'error', err.message || 'Failed to send message. Please try again.');
        });
    }

    /* ===========================================================
       Init
       =========================================================== */
    render();

    // Register service worker for PWA support
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').catch(function() {
        // Service worker registration failed - non-critical
      });
    }
  </script>
</body>
</html>
